<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Vivexa Tech | Admin Dashboard</title>
    <link rel="icon" type="image/svg+xml" href="https://www.vivexatech.online/assets/favicon/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --dark-bg: #0A101E; --dark-card: #10182C; --dark-border: #1E293B;
            --text-primary: #E2E8F0; --text-secondary: #94A3B8; --cyan: #00E6F7; --blue: #3672F8; --red: #ef4444;
            --border-radius: 8px; --transition: all 0.3s ease;
        }
        body { background-color: var(--dark-bg); color: var(--text-secondary); font-family: 'Poppins', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 2rem; box-sizing: border-box;}
        .container { width: 100%; max-width: 400px; text-align: center; }
        h1 { color: var(--text-primary); margin-bottom: 2rem; }
        .panel-card { background-color: var(--dark-card); padding: 2rem; border-radius: var(--border-radius); border: 1px solid var(--dark-border); }
        .cta-button { display: block; width: 100%; padding: 14px 32px; border: none; border-radius: var(--border-radius); background: linear-gradient(90deg, var(--cyan), var(--blue)); color: #fff; font-weight: 700; font-size: 1.2rem; cursor: pointer; transition: var(--transition); text-decoration: none; box-sizing: border-box; }
        .cta-button:hover { filter: brightness(1.2); }
        .home-panel-options { display: flex; flex-direction: column; gap: 1.5rem; margin-top: 2rem; }
        #logout-btn { background: var(--red); margin-top: 2rem; font-size: 1rem; }
        #login-container, #home-panel { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <div id="login-container" class="panel-card">
            <h1>Admin Login</h1>
            <button id="login-btn" class="cta-button">Login with Google</button>
        </div>

        <div id="home-panel" class="panel-card">
            <h1>Admin Dashboard</h1>
            <p id="admin-email"></p>
            <div class="home-panel-options">
                <a href="portfolio.html" class="cta-button">Manage Portfolio</a>
                <a href="receipt.html" class="cta-button">Generate Receipt</a>
            </div>
            <button id="logout-btn" class="cta-button">Logout</button>
        </div>
    </div>

    <script src="firebase-config.js"></script> 
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-auth-compat.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const ADMIN_EMAIL = "vivexatech@gmail.com";

            firebase.initializeApp(firebaseConfig);
            const auth = firebase.auth();
            const googleProvider = new firebase.auth.GoogleAuthProvider();

            const loginContainer = document.getElementById('login-container');
            const homePanel = document.getElementById('home-panel');
            const adminEmailEl = document.getElementById('admin-email');
            const loginBtn = document.getElementById('login-btn');
            const logoutBtn = document.getElementById('logout-btn');

            auth.onAuthStateChanged(user => {
                if (user && user.email === ADMIN_EMAIL) {
                    loginContainer.style.display = 'none';
                    homePanel.style.display = 'block';
                    adminEmailEl.textContent = `Logged in as: ${user.email}`;
                } else {
                    loginContainer.style.display = 'block';
                    homePanel.style.display = 'none';
                    if (user) {
                        auth.signOut();
                        alert("Access Denied. Only the admin can log in.");
                    }
                }
            });

            loginBtn.addEventListener('click', () => {
                auth.signInWithPopup(googleProvider).catch(err => console.error(err));
            });

            logoutBtn.addEventListener('click', () => {
                auth.signOut();
            });
        });
    </script>
</body>
</html>
